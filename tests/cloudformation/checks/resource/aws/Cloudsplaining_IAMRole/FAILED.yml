AWSTemplateFormatVersion: "2010-09-09"
Description: IAM Roles with multiple policies
Resources:
  PolicyOnePassPolicyTwoFailAdmin:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - ec2.amazonaws.com
            Action:
              - 'sts:AssumeRole'
      Policies:
      - PolicyName: a
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: 
              - 's3:Get*'
              Resource: 
              - 'foo'
      - PolicyName: b
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: '*'
              Resource: '*'    
      Tags:
        - Key: yor_trace
          Value: 5622a974-547d-435f-b3b0-e3b0e76a963b
  PolicyOneFailPolicyTwoFailPermissionsWildcard:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - ec2.amazonaws.com
            Action:
              - 'sts:AssumeRole'
      Policies:
      - PolicyName: a
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: 
              - 'iam:ChangePassword'
              Resource: '*'
      - PolicyName: b
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: 
              - 's3:PutBucketAcl'
              Resource: '*'
      Tags:
        - Key: yor_trace
          Value: d63b8927-b683-4474-b7e0-342d3e5b132e
