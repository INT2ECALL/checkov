AWSTemplateFormatVersion: "2010-09-09"
Description: IAM Users with multiple policies
Resources:
  NotPermissionsScopedAndWildcard:
    Type: 'AWS::IAM::User'
    Properties:
      Policies:
      - PolicyName: a
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: 
              - 's3:Get*'
              Resource: 
              - 'foo'
      - PolicyName: b
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: 
              - 's3:Get*'
              Resource: 
              - '*'        
      Tags:
        - Key: yor_trace
          Value: d4e16bf6-2e11-4f6a-8533-c4ad49e7383a
  AdminDenyAndPermissionsScoped:
    Type: 'AWS::IAM::User'
    Properties:
      Policies:
      - PolicyName: a
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Deny
              Action: '*'
              Resource: '*'
      - PolicyName: b
        PolicyDocument:
          Version: "2012-10-17"
          Statement:
            - Effect: Allow
              Action: 
              - 'iam:ChangePassword'
              Resource: 
              - 'foo'
      Tags:
        - Key: yor_trace
          Value: 3f5ae76f-dd41-409e-be48-4d4a18b6c8fd
